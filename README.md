# Лабораторная работа №2

[![CI](https://github.com/trickyPupa/func-prog-3/actions/workflows/elixir.yml/badge.svg)](https://github.com/trickyPupa/func-prog-lab3/actions/workflows/elixir.yml)

**Лабор Тимофей Владимирович P3325**

## Использование

Все платформы:

```bash
mix run --no-halt main.exs --algo algo --step step [ --n n] [filename]
```

Windows:

```powershell
./run.bat
```

## Требования

**Цель:** получить навыки работы с вводом/выводом, потоковой обработкой данных, командной строкой.

В рамках лабораторной работы предлагается повторно реализовать лабораторную работу по предмету "Вычислительная математика" посвящённую интерполяции (в разные годы это лабораторная работа 3 или 4) со следующими дополнениями:

- ✅ обязательно должна быть реализована линейная интерполяция ([отрезками](https://en.wikipedia.org/wiki/Linear_interpolation));
- ✅ настройки алгоритма интерполяции и выводимых данных должны задаваться через аргументы командной строки:
  - какие алгоритмы использовать (в том числе два сразу);
  - частота дискретизации результирующих данных;
  - и т.п.;

- ✅ входные данные должны задаваться в текстовом формате на подобии ".csv" (к примеру x;y\n или x\ty\n) и подаваться на стандартный ввод, входные данные должны быть отсортированы по возрастанию x;
- ✅ выходные данные должны подаваться на стандартный вывод;
- ✅ программа должна работать в потоковом режиме (пример -- cat | grep 11), это значит, что при запуске программы она должна ожидать получения данных на стандартный ввод, и, по мере получения достаточного количества данных, должна выводить рассчитанные точки в стандартный вывод;

Дополнительные возможности:

- ✅ ввод из файла

## Ключевые элементы реализации

Программа состоит из нескольких модулей:

- ✅ Reader
  - Чтение входных данных из стандартного ввода или из файла

- ✅ Writer
  - Печать результатов в стандартный вывод

- ✅ Parser
  - Парсит аргументы программы в специальную структуру

- ✅ Processor
  - Центр программы
  - Получает на вход аргументы из Parser
  - Получает готовые данные из Reader
  - Высчитывает точки с помощью методов интерполяции
  - Передает посчитанные данные Writer
  - После получения сообщения о конце ввода завершает Writer и завершается сам

- ✅ LinearInterpolator
  - Линейная интерполяция отрезками

- ✅ NewtonInterpolator
  - Интерполяция методом Ньютона

- ✅ MixedInterpolator
  - Интерполяция сразу двумя методами
  - Внутри использует LinearInterpolator и NewtonInterpolator

- ✅ Interpolator
  - Входная точка программы
  - Принимает и парсит аргументы с помощью Parser
  - Запускает Reader и Writer
  - Запускает Processor
  - После завершения всех процессов завершает vm

## Пример работы программы

```bash
mix run --no-halt main.exs --algo newton --step 0.4 --n 3
< 1 1
< 2 2
< 3 3
newton > 1.0000, 1.0000
newton > 1.4000, 1.4000
newton > 1.8000, 1.8000
newton > 2.2000, 2.2000
newton > 2.6000, 2.6000
newton > 3.0000, 3.0000
< 6 7
newton > 2.0000, 2.0000
newton > 2.4000, 2.3800
newton > 2.8000, 2.7867
newton > 3.2000, 3.2200
newton > 3.6000, 3.6800
newton > 4.0000, 4.1667
newton > 4.4000, 4.6800
newton > 4.8000, 5.2200
newton > 5.2000, 5.7867
newton > 5.6000, 6.3800
newton > 6.0000, 7.0000
< end
---END---
```
